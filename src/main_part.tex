\stepcounter{mysection}\section{\arabic{mysection} Основная часть}

	Целью данного исследования является выявление принципиальной возможности и целесообразности построения
		и использования системы логического вывода в рассматриваемой задаче.
		Поэтому оправданы все упрощения, которые неизбежны при построении моделей и переходе к реальному приложению.

\subsection{Упрощения}
	Первым основным упрощением является дискретность времени с заданной величиной интервала между
		соседними моментами времени (тактами), содержащее начальный момент и бесконечно продолжимое вправо.
		Высота этажей считается одинаковой, и скорость движения лифта с одного этажа на другой полагаем
		равной одному такту. Длительность остановки кабин для входа-выхода пассажиров равняется одному такту.
		Так же не рассматриваются случаи переполнения кабин.

	Считается, что любой пассажир придерживается следующим правилам:

	1) Для вызова лифта он нажимает на этаже кнопку вызова и ждёт кабину, без ложных и ошибочных вызовов;

	2) Войдя в кабину, пассажир задаёт ей команду, для чего он нажимает кнопку нужного этажа,
		который вносится в маршрут данной кабины, без ложных и ошибочных команд.

	Простейшим алгоритмом принятия решения является поиск ближайшей кабины к месту вызова.
		Однако, термин «ближайшая» требует уточнения и рассмотрения примера. 

	Допустим, есть система из k = 2 кабин, способных перемещаться по n = 5 этажам.
		Пусть кабины находятся на 1-м и 2-м этажах, первая пуста и находится в покои,
		а второй предстоят остановки на 3-м и 4-м этажах. Поступает вызов с пятого этажа,
		и первая кабина получается ближайшей, так как её требуется 4 такта,
		а второй кабине требуется 5 тактов. Получается дистанция – это количество тактов,
		которое необходимо кабине, чтобы добраться до этажа, выполняя уже сформированный маршрут (рисунок 1).

	Есть и другой подход, который основывается на исключении худших альтернатив на основе логического вывода.
		И если после сокращения допустимых альтернатив их останется несколько,
		то выбор может быть случайным или основываться на каких-либо критериях.
		В этом и предыдущих подходах одним из основных критериев является средняя длительность ожиданий.

\subsection{Логическая модель}
	Выстраивая логическую модель, получаем тройку (F, S, V), где F -- это позитивно образованная формула (ПОФ),
		описывающая состояние лифта и принципы, по которым функционирует лифт,
		S -- порядок ответов на запросы при логическом выводе, V -- внешние воздействие,
		в данном случае имитация пассажиропотока. Так же следует отметить, что одними из основных будут
		предикаты связанные со временем: T(t) -- момент времени t и N(t, t') -- следующий за t момент времени t'.

	Основными объектами в данной модели являются кабина Cab и человек Man.
		В момент времени t кабина имеет вид Cab(i, e, S, t), где i – идентификатор кабины, e – этаж,
		а S - маршрут кабины, список этажей. Человек имеет вид Man(e, d, τ, t), где e – этаж,
		d – целевой этаж, который добавляется в маршрут S в момент входа человека в кабину и d ≠ e,
		τ – длительность ожидания человеком кабины.
		Дистанцией же будет Dist(e, S, i, t, α), где α – это дистанция от кабины i
		на этаже е с маршрутом S, где произошёл вызов. И связь i кабины с вызовом с e этажа Conn(i, e).

	В каждый момент времени $t_0$ принятия решения формула F имеет вид:\\

	$ \exists A(t_0) \begin{cases} \forall T(t)\exists T(t'), N(t, t'), \\ \Phi \\ \Psi \end{cases} $\\

	$A(t_0)$ -- коньюнкт, описывающий состояние системы в момент времени $t_0$. Если $A(t_0)$ содержит Man,
		то появление человека необходимо связать с вызовом определённой кабины.
		И группа формул \Phi порождает все варианты связи и имитирует движение кабин совместно с
		формулой времени $\forall T(t)\exists T(t'), N(t, t')$ для некоторого количества тактов.
		А за счёт формул \Psi происходит фильтрация некоторых вариантов.

	Оставшиеся варианты оцениваются оцениваются и выбирается один из самых наилучших.

	\subsubsection{Группа формул \Psi}

	$ \forall Man(e, d, τ, t), N(t, t')  \exists Dist(e, S_1, 1, t, \alpha_1), ..., \\
				Dist(e, S_k, k, t, \alpha_k)\begin{cases}\exists  Conn(1,e) \\ ... \\\exists  Conn(k, e), 
					\\\exists  Man(e, d, τ + 1, t') \end{cases} $\\

	-- формула вычисляющая дистанцию до каждой кабины при новом появлении человека

	$ \forall Cab(i, e, S, t), Conn(i, e'), N(t, t') \begin{cases}
			\forall e' < e \exists Cab(i, e - 1, S/e', t') \\
			\forall e < e' \exists Cab(i, e + 1, S/e', t')
	\end{cases} $


	$ \forall Cab(i, e, S, t), S = S(e', S_1), N(t, t') \begin{cases}
			\forall e = e' \exists Cab(i, e - 1, S_1, t') \\
			\forall e' < e \exists Cab(i, e - 1, S, t') \\
			\forall e < e' \exists Cab(i, e + 1, S, t')
	\end{cases} $


	$ \forall Cab(i, e, null, t), N(t, t')\exists Cab(i, e, null, t')$\\

	-- формулы реализующие движение, где $S / e$ является операцией вставки этажа в маршрут.

	\subsubsection{Группа формул \Phi}

	Формулы из группы \Phi реализуют дополнительные ограничения, которые следует учитывать при 
	построении логического вывода. В дальнейших работах они использоваться не будут. Но упомянуть о них
	крайне необходимо, так как они дают возможность данной модели быть более гибкой к различным ситуациям.
	А также их добавление в разрабатываемую систему не будет сложной задачей.

	Например, вот формула, которая запрещает откладывать связывание вызова лифта человеком белее, чем на 4 такта:

	$ \forall Man(e, d, 4, t)\exists False$\\

	Это правили необходимо, в том случае если в модели будет возможна отсрочка принятия решения на вызов лифта.

	\subsubsection{Итоги}
	Таким образом определяется функция F. Её реализация будет выполнена на языке Prolog. Перевод из приведённых
	выше формул возможен по примеру из теоретической части.
